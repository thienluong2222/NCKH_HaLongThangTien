<div class="heritage-explanation">
  <!-- Header Section -->
  <div class="explanation-header">
    <div class="header-content">
      <div class="header-icon">
        <span class="icon-inner">üìä</span>
        <div class="icon-glow"></div>
      </div>
      <div class="header-text">
        <h3>Ph√¢n t√≠ch Chi ti·∫øt</h3>
        <p>Kh√°m ph√° logic AI ƒë·∫±ng sau d·ª± ƒëo√°n</p>
      </div>
    </div>
    <div class="header-decoration">
      <span class="pattern">‚úß</span>
      <span class="pattern">‚óá</span>
      <span class="pattern">‚úß</span>
    </div>
  </div>

  <!-- Tabs Content -->
  <div class="tabs-container">
    <mat-tab-group animationDuration="300ms" class="heritage-tabs">
      <!-- Chart Tab -->
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="tab-label">
            <mat-icon>bar_chart</mat-icon>
            <span>Bi·ªÉu ƒë·ªì x√°c su·∫•t</span>
          </div>
        </ng-template>
        
        <div class="tab-content">
          <div class="chart-wrapper">
            <div #chartContainer id="chart" class="chart-container"></div>
          </div>
        </div>
      </mat-tab>
      
      <!-- Visual Rules Tab -->
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="tab-label">
            <mat-icon>visibility</mat-icon>
            <span>Quy t·∫Øc h√¨nh ·∫£nh</span>
          </div>
        </ng-template>
        
        <div class="tab-content">
          <div class="rules-section">
            <div class="section-header">
              <span class="section-icon">üîç</span>
              <h4>C√°c y·∫øu t·ªë h√¨nh ·∫£nh ƒë∆∞·ª£c ph√°t hi·ªán</h4>
            </div>
            
            @if (festivalService.hasResults()) {
              <div class="rules-grid">
                @for (rule of visualRules; track rule.name) {
                  <div class="rule-card" [class.satisfied]="rule.satisfied">
                    <div class="rule-status">
                      <mat-icon>{{ rule.satisfied ? 'check_circle' : 'cancel' }}</mat-icon>
                    </div>
                    <div class="rule-content">
                      <h5>{{ rule.name }}</h5>
                      <p>{{ rule.description }}</p>
                    </div>
                    <div class="rule-badge" [class.found]="rule.satisfied">
                      {{ rule.satisfied ? 'Ph√°t hi·ªán' : 'Kh√¥ng t√¨m th·∫•y' }}
                    </div>
                  </div>
                }
              </div>
            } @else {
              <div class="empty-state">
                <div class="empty-illustration">
                  <span class="main-icon">üñºÔ∏è</span>
                  <span class="orbit-icon">üîç</span>
                </div>
                <h5>Ch∆∞a c√≥ d·ªØ li·ªáu</h5>
                <p>T·∫£i l√™n h√¨nh ·∫£nh ho·∫∑c video ƒë·ªÉ xem c√°c quy t·∫Øc h√¨nh ·∫£nh ƒë∆∞·ª£c ph√°t hi·ªán</p>
              </div>
            }
          </div>
        </div>
      </mat-tab>
      
      <!-- Chat Analysis Tab -->
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="tab-label">
            <mat-icon>forum</mat-icon>
            <span>Ph√¢n t√≠ch tr√≤ chuy·ªán</span>
          </div>
        </ng-template>
        
        <div class="tab-content">
          <div class="rules-section">
            <div class="section-header">
              <span class="section-icon">üí¨</span>
              <h4>Th√¥ng tin t·ª´ cu·ªôc tr√≤ chuy·ªán</h4>
            </div>
            
            @if (chatRules.length > 0) {
              <div class="rules-grid">
                @for (rule of chatRules; track rule.keyword) {
                  <div class="rule-card chat-rule">
                    <div class="rule-status boost">
                      <mat-icon>auto_awesome</mat-icon>
                    </div>
                    <div class="rule-content">
                      <h5>{{ rule.keyword }}</h5>
                      <p>{{ rule.impact }}</p>
                    </div>
                    <div class="rule-badge boost">
                      +{{ rule.boost }}%
                    </div>
                  </div>
                }
              </div>
            } @else {
              <div class="empty-state">
                <div class="empty-illustration">
                  <span class="main-icon">üí≠</span>
                  <span class="orbit-icon">‚ú®</span>
                </div>
                <h5>Ch∆∞a c√≥ d·ªØ li·ªáu tr√≤ chuy·ªán</h5>
                <p>Tr√≤ chuy·ªán v·ªõi AI ƒë·ªÉ cung c·∫•p th√™m ng·ªØ c·∫£nh v√† c·∫£i thi·ªán ƒë·ªô ch√≠nh x√°c</p>
              </div>
            }
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
